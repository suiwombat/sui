
mysten_deps = [
    "//crates/sui-tls:sui-tls",
    "//crates/sui-types:sui-types",
    "//crates/mysten-metrics:mysten-metrics",
    "//crates/telemetry-subscribers:telemetry-subscribers",
]

rust_binary(
    name="sui-proxy",
    srcs = glob(["src/**/*.rs"]),
    # crate_root="src/lib.rs",
    env={
        "CARGO_PKG_AUTHORS": "Mysten Labs <build@mystenlabs.com>",
        "CARGO_BIN_NAME": "sui-proxy",
        "CARGO_PKG_VERSION": "0.0.2",
        "CARGO_PKG_NAME": "sui-proxy",
        # "CARGO_PKG_VERSION_MAJOR": "0",
        # "CARGO_PKG_VERSION_MINOR": "3",
        # "CARGO_PKG_VERSION_PATCH": "28",
    },
    # cargo_env = True,
    deps= mysten_deps + [
        "//third-party:axum",
        "//third-party:axum-server",
        "//third-party:anyhow",
        "//third-party:bytes",
        "//third-party:clap",
        "//third-party:protobuf",
        "//third-party:tokio",
        "//third-party:tracing",
        "//third-party:const-str",
        "//third-party:tower-http",
        "//third-party:tower",
        "//third-party:serde",
        "//third-party:serde_with",
        "//third-party:serde_json",
        "//third-party:serde_yaml",
        "//third-party:git-version",
        "//third-party:itertools",
        "//third-party:rand",
        "//third-party:reqwest",
        "//third-party:hyper",
        "//third-party:tracing",
        "//third-party:multiaddr",
        "//third-party:prometheus",
        "//third-party:snap",
        "//third-party:rustls",
        "//third-party:rustls-pemfile",
        "//third-party:prost",
        "//third-party:once_cell",
        "//third-party:http-body",
        "//third-party:fastcrypto",
    ],
    edition = "2021",
    visibility=["PUBLIC"],
)


rust_library(
    name="foo",
    # srcs = glob(["src/**/*.rs"]),
    srcs = ["src/foo.rs"],
    crate_root="src/foo.rs",
    deps = mysten_deps + [
        # "//third-party:mio",
        "//third-party:axum",
        "//third-party:axum-server",
        "//third-party:anyhow",
        "//third-party:bytes",
        "//third-party:tokio",
        "//third-party:clap",
        "//third-party:reqwest",
        "//third-party:rand",
        "//third-party:hyper",
        "//third-party:protobuf",
        "//third-party:itertools",
        "//third-party:serde",
        "//third-party:serde_with",
        "//third-party:serde_yaml",
        "//third-party:serde_json",
        # "//third-party:prometheus-parse",
        "//third-party:prometheus",
        "//third-party:tracing",
        "//third-party:tower-http",
        "//third-party:tower",
        "//third-party:git-version",
        "//third-party:once_cell",
        "//third-party:const-str",
        "//third-party:multiaddr",
        "//third-party:snap",
        "//third-party:rustls",
        "//third-party:rustls-pemfile",
        "//third-party:http-body",
        "//third-party:fastcrypto",
    ],
)